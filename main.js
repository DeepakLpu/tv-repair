document.addEventListener('DOMContentLoaded',function(){const pageLinks=document.querySelectorAll('[data-page]');function showPage(pageId){document.querySelectorAll('.page').forEach(page=>{page.classList.remove('active')});document.getElementById(pageId+'-page').classList.add('active');pageLinks.forEach(link=>{link.classList.remove('active');if(link.getAttribute('data-page')===pageId){link.classList.add('active')}});if(navLinks.classList.contains('active')){navLinks.classList.remove('active');hamburger.innerHTML='<i class="fas fa-bars"></i>'}
window.scrollTo(0,0)}
pageLinks.forEach(link=>{link.addEventListener('click',function(e){e.preventDefault();const pageId=this.getAttribute('data-page');showPage(pageId);history.pushState({page:pageId},'',`#${pageId}`)})});const initialPage=window.location.hash.substring(1)||'home';showPage(initialPage);window.addEventListener('popstate',function(e){const pageId=e.state?e.state.page:'home';showPage(pageId)});const hamburger=document.querySelector('.hamburger');const navLinks=document.querySelector('.nav-links');hamburger.addEventListener('click',()=>{navLinks.classList.toggle('active');hamburger.innerHTML=navLinks.classList.contains('active')?'<i class="fas fa-times"></i>':'<i class="fas fa-bars"></i>'});const contactForm=document.getElementById('contactForm');const appointmentForm=document.getElementById('appointmentForm');contactForm.addEventListener('submit',(e)=>{e.preventDefault();alert('Thank you for your message! We will get back to you soon.');contactForm.reset()});function saveAppointment(appointmentData){let appointments=JSON.parse(localStorage.getItem('tvRepairAppointments'))||[];const newAppointment={id:Date.now().toString(),timestamp:new Date().toISOString(),...appointmentData};appointments.push(newAppointment);localStorage.setItem('tvRepairAppointments',JSON.stringify(appointments));return newAppointment}
appointmentForm.addEventListener('submit',(e)=>{e.preventDefault();const formData=new FormData(appointmentForm);const appointmentData={};formData.forEach((value,key)=>{appointmentData[key]=value});const savedAppointment=saveAppointment(appointmentData);console.log('Appointment booked and saved:',savedAppointment);alert(`Thank you, ${appointmentData.name}!\n\nYour appointment for ${appointmentData.service} on ${appointmentData.date} at ${appointmentData.time} has been booked.\n\nAppointment ID: ${savedAppointment.id}\n\nWe'll confirm shortly.`);appointmentForm.reset()});const serviceType=document.getElementById('appointment-type');const addressLabel=document.querySelector('.address-label');const addressField=document.getElementById('appointment-address');serviceType.addEventListener('change',function(){if(this.value==='on-site'){addressLabel.style.display='block';addressField.style.display='block';addressField.required=!0}else{addressLabel.style.display='none';addressField.style.display='none';addressField.required=!1}});addressLabel.style.display='none';addressField.style.display='none';addressField.required=!1;const today=new Date().toISOString().split('T')[0];document.getElementById('appointment-date').min=today})